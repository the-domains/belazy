<!DOCTYPE html>
<html dir="ltr" lang="en"><head><title>beLazy - </title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="generator" content="The Grid the-composer/ds-nick-jones/0.0.108">
  <meta name="the-grid-solution" content="bb6d04e9-4ed6-4fa0-a322-5258ad70a671">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/6.9.1/polyfill.js"></script>
  <link rel="stylesheet" href="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/styles/css/style.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/styles/css/animations.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/styles/css/props.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/styles/css/focalpoint.css" type="text/css" />
  <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/ds-nick-jones-components.dist.min.js"></script>
  <style id="web-font-binder" type="text/css">html { font-family: '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } html.wf-active { font-family: 'Inconsolata', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-title, .wf-active .font-headline, .wf-active .font-h1, .wf-active .font-h2, .wf-active .font-h3 { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-subtitle, .wf-active .font-h4, .wf-active .font-h5, .wf-active .font-h6 { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 700; } .wf-active .font-text, .wf-active .font-list { font-family: 'Inconsolata', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; } .wf-active .font-quote { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400;font-style: italic; } .wf-active .font-cta { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; }</style><meta property="og:site_name"/><link rel="alternate" type="application/rss+xml" title="RSS" href="./rss.xml"/></head><body><div id="app" data-reactroot="" data-reactid="1" data-react-checksum="247060713"><div id="wrapper" class="System color-bg m-t-4 Vignelli section-h-padding-large section-v-padding-medium hero-transition-none  colors-light colors-global " data-reactid="2"><span style="display:hidden;" data-reactid="3"></span><section id="0" class="Section Section--components-1 Section--list Section--nav title-size-medium  colors-light colors-local " data-reactid="4"><div class="Component Nav--list-row ls-fx-r j-c-between color-box color-text-pop p-l-1 p-r-3 ls-p-r-0" data-reactid="5"><!-- react-empty: 6 --><div class="Site-title color-text-pop pos-r t-2rem ls-t-1rem w-s-wrap ls-w-s-nowrap f-s-s ls-f-s-m z-20" data-reactid="7"><span data-reactid="8"><!-- react-empty: 9 --><a data-reactid="10">beLazy</a></span></div><!-- react-text: 11 --><!-- /react-text --></div></section><div class="min-h-80vh" data-reactid="12"><section id="1" class="Section Section--article color-bg color-title color-text w-100p p-1  colors-white colors-local " data-reactid="13"><div class="Component max-w-768px m-a pos-r" data-reactid="14"><p>Kickstarting VMware ESXi</p><p>https://michael.lustfield.net/misc/completely-automated-esxi-deployment</p><p>This post has to come with the disclaimer that 99.97% of ESXi deployments have<em>NO</em>use for anything this complicated. For that 0.03% of us, ESXi can be one heck of a deployment nightmare. It doesn't have to be, though.</p><h2>Background: The Situation</h2><p>The company I work for has hundreds of remote facilities and each of these facilities connects back to our main office. Most of the time this is a pair of T1 lines, but sometimes it's just a single line. Each facility needs local file storage. They need other things locally, but the file storage is easy to put into perspective.</p><p>The easy answer is to deploy a server at each facility that keeps data locally and synchronizes with our main office.</p><p>Well, we will want to replace this hardware someday so obviously we'll want virtualization. There are many options out there and we almost went with proxmox but in the end settled on ESXi.</p><p>So now we will have an ESXi host at each facility and virtual machines running on it. The ESXi install is rather light and doing that remotely is no real headache. However, we also need to install customized servers on each one. Each of these servers needs to pull a lot of data during installation and installing at the facility makes no sense. Installing locally and pushing the image to the ESXi host at the facility is equally absurd. In our case, this could be a few weeks.</p><p>This is the situation we were faced with.</p><h2>The Solution</h2><p>The solution was to build a single thumb drive that did a complete deployment of the ESXi host and all the virtual machines without touching the network.</p><p>Sounds simple or impossible depending on your understanding of ESXi. The answer is actually somewhere in between. It's incredibly difficult to figure out because even ESXi developers told me it wasn't possible. Once you figure it out, it's not horrible to repeat the process.</p><p>Basically:</p><ol><li>Build the Virtual Machines to be put in the install</li><li>Export them to an OVA file</li><li>Put the OVA files on a web server</li><li>Put the installer on the thumb drive</li><li>Modify the installer to include the images</li><li>Set up first boot stuff</li><li>Create an image</li><li>Set up a thumb drive to deploy that image</li></ol><p>Sounds easy, right? Sure...</p><h2>Creating the OVA</h2><p>I'll breeze over this section. All you want to do is deploy a local ESXi server, install your virtual machines, and configure them as needed. If they're Linux boxes, then you will probably have a first boot script embedded. If it's a Windows server, don't forget the sysprep.</p><p>Once the virtual servers are ready, turn them off. Export them as an OVA. The OVF option will create a few files where the OVA will stick everything in one file.</p><p>Upload those files to a web server.</p><h2>ESXi on USB Thumb Drive</h2><p>Our ESXi install disk needed extra drivers and we just used<a href="http://esxi-customizer.v-front.de/">ESXi Customizer</a>to get them in there. That tool doesn't really need any explanation.</p><p>When you have the ESXi ISO that you plan to use, you'll want to stick it on a USB stick. This is important because it lets you modify things easily. In my case, my thumb drive was sdc.</p><p>Prepping the thumb drive:</p><p>Putting files on the thumb drive:</p><p>Then modify some files for use with syslinux:</p><p>The ISO is no longer needed:</p><p>You can now unmount /mnt/usb if you want to verify that you can boot to it and run the installer. For the remainder, I'll assume that you left it since we have to still customize it.</p><h2>Creating Our Customizations: The Boot File</h2><p>Later, we'll be creating ks.cfg and ovf-00.t00. For the moment, assume that they exist. We need to tell ESXi about them.</p><p>Edit /mnt/usb/boot.cfg</p><p>In the modules line, we need to tell ESXi about ovf-00.t00. Add /ovf-00.t00 to the list. It will look like the following.</p><p>Make sure to keep the ' --- ' between each item.</p><p>Where you see:</p><p>Add ks=usb:/KS.CFG:</p><p>Now the installer will know that it needs to load the /ovf-00.t00 file into memory and used the ks.cfg file as the kickstart when booting. If you don't quite see the magic yet, this already allows us to make the installation fully hands off.</p><h2>Creating Our Customizations: The Kickstart</h2><p>Now we get to the fun part. The first step is to create a kickstart file. This is rather easy. It will look very much like this:</p><p>Edit /mnt/usb/ks.cfg:</p><p>There is a lot more you can with the kickstart, and ours is massive.</p><h2>Creating Our Customizations: The OVF</h2><p>Notice in the above, I expect /ovf to exist. We're about to make it so! First we need to aquire ovftools. The VMware website has an<a href="http://www.vmware.com/support/developer/ovf/">ovftool download</a>.</p><p>Download the 64bit version and install it.</p><p>Now we need to make /ovf and the directories inside of it.</p><p>Take the installed ovftools and stick them in the tools directory.</p><p>We leave an empty files directory. This is where the post install part of the kickstart file will dump the OVA files.</p><p>Now we need to turn the ovf directory into ovf-00.t00.</p><h2>Creating Our Customizations: Finished</h2><p>Now that you have everything done, run umount /mnt/usb. Put that usb key into your server and boot to it. The installer will go through and do what we told it to.</p><p>Once it powers off, you're ready to make an image from the installed ESXi.</p><h2>Image Creation: USB Thumb Drive</h2><p>For this part, we need yet another USB thumb drive. To keep this easy, just follow these basic steps.</p><ol><li>Use a Windows box</li><li>Download<a href="http://www.linuxliveusb.com/en/download">LiLi USB Creator</a></li><li>Download<a href="http://clonezilla.org/downloads.php">Clonezilla</a>(I used the alternative stable)</li><li>Run LiLi</li><li>Tell it to install Clonezilla to a thumb drive</li></ol><p>You'll probably want to make two copies of this. One for grabbing the image and one for pushing the image. For pushing the image, it needs to be at least as large as the image you're creating. For getting the image, 2GB is plenty.</p><p>Our ESXi image was large enough that we had to split up the thumb drive. A 64GB drive was given two partitions. The first was a 4GB FAT32 formatted partition that we placed Clonezilla on to. The second partition was Ext2 formatted and took up the remainder.</p><h2>Image Creation: Getting the Image</h2><p>Boot to the plain Clonezilla USB drive on the ESXi server. You will probably want to also hook up a larger external hard drive for this.</p><ol><li>Boot to Clonezilla (I usually ping the "Safe graphic" option)</li><li>optional: Plug in external hard drive</li><li>I usually ping the "Safe graphic" option</li><li>For the keymap settings, default is usually fine</li><li>Start_Clonezilla</li><li>Choose device-image</li><li>Pick where you want the image to go (local_dev for external HD)</li><li>Run through the settings for that option</li><li>Choose the Expert setting</li><li>Choose savedisk</li><li>Give it a name</li><li>You probably only have one option (sda) for the local disk</li><li>-q2 is usually best (partclone can handle sparse vmfs)</li><li>Make sure to select the -nogui option!!! (I usually deselect -c)</li><li>Compression is your choice</li><li>Since this is going to ext, feel free to make a large partition size</li><li>I usually choose to skip any checks (not safe)</li></ol><p>For me, the command in the end looks something like this...</p><p>Now you get to wait for the image to get created. Once it's done, power off the box and we can start working on the deployment thumb drive.</p><h2>Image Creation: Clonezilla Modifications</h2><p>We're going back to that extra flash drive you made. In our case, it was 64GB. The first 4GB partition (FAT32) has the standard Clonezilla image, for now. The remainder of the flash drive should be a single ext2 partition. You'll want yours to basically be the same, but maybe only a 16GB flash drive will be needed. This second partition will hold only one thing (your image).</p><p>We'll want to make some changes to the stuff LiLi put on the flash drive. For now, we'll assume the flash drive is sdb.</p><p>Now copy the image you created with Clonezilla into /mnt/sdb2 and unmount it.</p><p>That's all there is to getting our image on to the flash drive. That's not enough, though. Sure, we could launch the vanilla clonezill on here and tell it to use the image from the larger partition. However, we're trying to make this fully automatic. We came this far and we're finishing the task!</p><p>It's worth noting that live Linux distros use squashfs. This is an amazing tool because it lets you make a large file system into something very tiny, but this comes with the side effect that you're not able to actually modify the files. Instead, we have to take that file system, unpack it, repack it, and replace it.</p><p>To do this...</p><p>Edit /mnt/sdb1/syslinux/syslinux.cfg:</p><p>Feel free to copy/paste that exactly as is. This basically is what makes the interactive boot stuff in Clonezilla go away. It doesn't really do much more.</p><p>Moving on, we need to modify what happens after booting. You might remember this as a sleek set of options for what we want to do. We know what we want to do, so we're going to embed it.</p><p>First up is grabbing the existing squashfs image.</p><p>Now you have Clonezilla at your mercy. The first thing we want to do is burn the menu that launches when you start.</p><p>It's that simple. We delete that file. If you were to start up with only that change, you'd just end up at a shell. Now we need to tell it what to do when it boots up.</p><p>Edit etc/rc.local:</p><p>Edit usr/sbin/ocs-finished:</p><p>Make sure it's executable:</p><p>This assumes that you named your image BArK-Image, as I did. Case matters!</p><p>Now we need to create the new squashfs and put it on the flash drive.</p><p>That's all there is to it! Simple!</p><h2>Using It</h2><p>Simply boot to it. Done. It'll deploy that image to the first disk.</p><h2>Final Thoughts</h2><p>This is a very complicated process. As I stated before, it's for edge cases ONLY. If you're dealing with normal business needs, there are far superior options out there. For the other 0.03% out there, I really hope this can take you easily from the start to the end of this insane task.</p></div></section></div><section id="2" class="Section Section--components-2 Section--footer color-bg color-title z-30 p-1 ls-p-h-2vw  colors-light colors-local " data-reactid="15"><div class="fx-1 bd-none ls-bd-r ls-bd-w-1" data-reactid="16"><div class="Group Group-heading ls-p-r-4" data-reactid="17"><div class="Site-title color-text-pop" data-reactid="18"><span data-reactid="19"><!-- react-empty: 20 --><h2 data-reactid="21"><a data-reactid="22">beLazy</a></h2></span></div></div></div><div class="fx-1" data-reactid="23"><div class="Group Group--links" data-reactid="24"><div class="Group Group--links f-s-m ls-f-s-s w-s-wrap ls-w-s-nowrap" data-reactid="25"></div></div></div><div data-reactid="26"></div></section></div></div>
    <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/scripts/placeholder.js"></script>
    <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/scripts/hero-transition.js"></script>
  
        <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/scripts/navHamburger.js"></script>
        <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/scripts/navList.js"></script>
        <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/scripts/navLeft.js"></script>
      <script id="pageReactInitState">window.pageReactInitState = {"globalComponentsKey":"dsNickJones","items":{"site-navigation-item":{"id":"site-navigation-item","index":0,"metadata":{"@type":"navigation","starred":true},"content":[{"id":"site-navigation-block","type":"navigation","html":"","metadata":{"starred":true},"navigation":[{"href":"index.html","title":"beLazy","rel":"home","type":"MainPage"}]}]},"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe":{"id":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","index":1,"created_by":"688bc9b0-7c18-4cb3-8236-52e5a32d15a9","updated_by":"688bc9b0-7c18-4cb3-8236-52e5a32d15a9","created_at":"2016-03-23T01:23:51.453Z","updated_at":"2016-03-23T01:26:14.795Z","published":true,"score":0,"path":"_posts/2016-03-23-kickstarting-vmware-esxi.md","_title":"","metadata":{"@type":"Article","url":"kickstarting-vmware-esxi/index.html","inLanguage":null,"starred":false,"inFeed":true,"hasPage":true,"inNav":false,"description":"Kickstarting VMware ESXi","keywords":[]},"content":[{"id":"fdf26579-5212-46c1-83a9-adf8a97ce0a8","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Kickstarting VMware ESXi</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":true,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Kickstarting VMware ESXi"},{"id":"a685e917-5bb7-4574-8ed7-a3bfc0f99df0","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>https://michael.lustfield.net/misc/completely-automated-esxi-deployment</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":true,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"https://michael.lustfield.net/misc/completely-automated-esxi-deployment"},{"id":"3430e4cf-9aae-4116-82f5-6d1d363b1273","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>This post has to come with the disclaimer that 99.97% of ESXi deployments have<em>NO</em>use for anything this complicated. For that 0.03% of us, ESXi can be one heck of a deployment nightmare. It doesn't have to be, though.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"This post has to come with the disclaimer that 99.97% of ESXi deployments haveNOuse for anything this complicated. For that 0.03% of us, ESXi can be one heck of a deployment nightmare. It doesn't have to be, though."},{"id":"eab4acd4-cc23-4421-bd04-6408109a9f8d","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>Background: The Situation</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Background: The Situation"},{"id":"16e9b49b-23f0-4821-abda-ca81de02a78a","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>The company I work for has hundreds of remote facilities and each of these facilities connects back to our main office. Most of the time this is a pair of T1 lines, but sometimes it's just a single line. Each facility needs local file storage. They need other things locally, but the file storage is easy to put into perspective.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"The company I work for has hundreds of remote facilities and each of these facilities connects back to our main office. Most of the time this is a pair of T1 lines, but sometimes it's just a single line. Each facility needs local file storage. They need other things locally, but the file storage is easy to put into perspective."},{"id":"85951b97-3e09-45e0-973b-fc1cb63b52e9","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>The easy answer is to deploy a server at each facility that keeps data locally and synchronizes with our main office.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"The easy answer is to deploy a server at each facility that keeps data locally and synchronizes with our main office."},{"id":"035af0ef-7f4c-4762-8eb8-2fddd263c8af","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Well, we will want to replace this hardware someday so obviously we'll want virtualization. There are many options out there and we almost went with proxmox but in the end settled on ESXi.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Well, we will want to replace this hardware someday so obviously we'll want virtualization. There are many options out there and we almost went with proxmox but in the end settled on ESXi."},{"id":"ada5fca8-0bc5-43b9-a7b5-4d5509dfc7f5","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>So now we will have an ESXi host at each facility and virtual machines running on it. The ESXi install is rather light and doing that remotely is no real headache. However, we also need to install customized servers on each one. Each of these servers needs to pull a lot of data during installation and installing at the facility makes no sense. Installing locally and pushing the image to the ESXi host at the facility is equally absurd. In our case, this could be a few weeks.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"So now we will have an ESXi host at each facility and virtual machines running on it. The ESXi install is rather light and doing that remotely is no real headache. However, we also need to install customized servers on each one. Each of these servers needs to pull a lot of data during installation and installing at the facility makes no sense. Installing locally and pushing the image to the ESXi host at the facility is equally absurd. In our case, this could be a few weeks."},{"id":"c5456b35-0ae6-45a2-9667-5eb4e7d1fde8","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>This is the situation we were faced with.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"This is the situation we were faced with."},{"id":"e0057549-d071-426b-a580-4a4d2d55105b","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>The Solution</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"The Solution"},{"id":"736ae07f-ab4b-4154-9b11-30d481e7d816","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>The solution was to build a single thumb drive that did a complete deployment of the ESXi host and all the virtual machines without touching the network.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"The solution was to build a single thumb drive that did a complete deployment of the ESXi host and all the virtual machines without touching the network."},{"id":"29fe8d3b-5efa-45d4-84fd-a0c2c89b90d3","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Sounds simple or impossible depending on your understanding of ESXi. The answer is actually somewhere in between. It's incredibly difficult to figure out because even ESXi developers told me it wasn't possible. Once you figure it out, it's not horrible to repeat the process.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Sounds simple or impossible depending on your understanding of ESXi. The answer is actually somewhere in between. It's incredibly difficult to figure out because even ESXi developers told me it wasn't possible. Once you figure it out, it's not horrible to repeat the process."},{"id":"367642c7-ccf6-4952-9dd3-f269f29ca943","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Basically:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Basically:"},{"id":"ccbbafa9-4abc-4d0c-8689-249bbc0ae495","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"list","html":"<ol><li>Build the Virtual Machines to be put in the install</li><li>Export them to an OVA file</li><li>Put the OVA files on a web server</li><li>Put the installer on the thumb drive</li><li>Modify the installer to include the images</li><li>Set up first boot stuff</li><li>Create an image</li><li>Set up a thumb drive to deploy that image</li></ol>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]}},{"id":"f13ca293-0180-4fb9-8365-1b93e46a1553","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Sounds easy, right? Sure...</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Sounds easy, right? Sure..."},{"id":"b6655837-45d8-4e87-9b1e-8ee45c7b5040","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>Creating the OVA</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Creating the OVA"},{"id":"3313946c-45b3-4df2-9b32-0049e6aa0757","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>I'll breeze over this section. All you want to do is deploy a local ESXi server, install your virtual machines, and configure them as needed. If they're Linux boxes, then you will probably have a first boot script embedded. If it's a Windows server, don't forget the sysprep.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"I'll breeze over this section. All you want to do is deploy a local ESXi server, install your virtual machines, and configure them as needed. If they're Linux boxes, then you will probably have a first boot script embedded. If it's a Windows server, don't forget the sysprep."},{"id":"468184ab-33a9-4729-9ce7-b96cc1e3a5e3","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Once the virtual servers are ready, turn them off. Export them as an OVA. The OVF option will create a few files where the OVA will stick everything in one file.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Once the virtual servers are ready, turn them off. Export them as an OVA. The OVF option will create a few files where the OVA will stick everything in one file."},{"id":"7a64e071-24ad-4923-81cc-fa74e5010bf6","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Upload those files to a web server.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Upload those files to a web server."},{"id":"4fe82f77-1c1a-4c44-ad86-c49be20bf696","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>ESXi on USB Thumb Drive</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"ESXi on USB Thumb Drive"},{"id":"c0c2c000-42f9-4774-b965-0b9abf7fc472","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Our ESXi install disk needed extra drivers and we just used<a href=\"http://esxi-customizer.v-front.de/\">ESXi Customizer</a>to get them in there. That tool doesn't really need any explanation.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Our ESXi install disk needed extra drivers and we just usedESXi Customizerto get them in there. That tool doesn't really need any explanation."},{"id":"e54bf067-539c-4a55-9817-fb61546f4177","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>When you have the ESXi ISO that you plan to use, you'll want to stick it on a USB stick. This is important because it lets you modify things easily. In my case, my thumb drive was sdc.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"When you have the ESXi ISO that you plan to use, you'll want to stick it on a USB stick. This is important because it lets you modify things easily. In my case, my thumb drive was sdc."},{"id":"5ba95048-21ab-4285-af87-7eba6ae9971e","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Prepping the thumb drive:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Prepping the thumb drive:"},{"id":"b8a5eb18-415b-4307-a43b-90c7dbf8495a","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Putting files on the thumb drive:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Putting files on the thumb drive:"},{"id":"6efd2062-1888-4a26-a835-484135e90969","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Then modify some files for use with syslinux:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Then modify some files for use with syslinux:"},{"id":"a1c41c53-4d15-48e2-9d8c-4748775b8e5c","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>The ISO is no longer needed:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"The ISO is no longer needed:"},{"id":"b20bb94d-7270-4b72-9889-940f448e5f34","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>You can now unmount /mnt/usb if you want to verify that you can boot to it and run the installer. For the remainder, I'll assume that you left it since we have to still customize it.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"You can now unmount /mnt/usb if you want to verify that you can boot to it and run the installer. For the remainder, I'll assume that you left it since we have to still customize it."},{"id":"4183bf50-8e2c-4229-9864-8d94705b4627","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>Creating Our Customizations: The Boot File</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Creating Our Customizations: The Boot File"},{"id":"c2b6c40a-a182-45bf-b713-44f93739c954","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Later, we'll be creating ks.cfg and ovf-00.t00. For the moment, assume that they exist. We need to tell ESXi about them.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Later, we'll be creating ks.cfg and ovf-00.t00. For the moment, assume that they exist. We need to tell ESXi about them."},{"id":"0fa6232f-cfa1-4bc4-9d8c-ba5c64f703d1","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Edit /mnt/usb/boot.cfg</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Edit /mnt/usb/boot.cfg"},{"id":"c9e25d8d-6bcf-41bd-aafd-3a8370acde67","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>In the modules line, we need to tell ESXi about ovf-00.t00. Add /ovf-00.t00 to the list. It will look like the following.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"In the modules line, we need to tell ESXi about ovf-00.t00. Add /ovf-00.t00 to the list. It will look like the following."},{"id":"a1fee195-6096-4eee-8bef-532b7eb0d6ca","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Make sure to keep the ' --- ' between each item.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Make sure to keep the ' --- ' between each item."},{"id":"3a930701-a3c0-4bd4-a1f8-85bc5cdd2b58","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Where you see:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Where you see:"},{"id":"43fd85d6-059a-4fec-93a4-65fc5c244b5b","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Add ks=usb:/KS.CFG:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Add ks=usb:/KS.CFG:"},{"id":"27b2a7a0-0fd8-4b03-bc11-6f0f372d8a04","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Now the installer will know that it needs to load the /ovf-00.t00 file into memory and used the ks.cfg file as the kickstart when booting. If you don't quite see the magic yet, this already allows us to make the installation fully hands off.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Now the installer will know that it needs to load the /ovf-00.t00 file into memory and used the ks.cfg file as the kickstart when booting. If you don't quite see the magic yet, this already allows us to make the installation fully hands off."},{"id":"95f877a5-c171-4d9a-9e36-276ea913aa5d","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>Creating Our Customizations: The Kickstart</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Creating Our Customizations: The Kickstart"},{"id":"4d01e4ae-d334-488a-b7a2-54959f154c71","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Now we get to the fun part. The first step is to create a kickstart file. This is rather easy. It will look very much like this:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Now we get to the fun part. The first step is to create a kickstart file. This is rather easy. It will look very much like this:"},{"id":"501baae4-0cf5-414b-8022-82fd7715366a","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Edit /mnt/usb/ks.cfg:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Edit /mnt/usb/ks.cfg:"},{"id":"040db7ee-587e-409d-b092-fdb0d20ddfb7","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>There is a lot more you can with the kickstart, and ours is massive.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"There is a lot more you can with the kickstart, and ours is massive."},{"id":"45b0eef2-55b8-49ff-8f67-83e4cdcd732b","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>Creating Our Customizations: The OVF</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Creating Our Customizations: The OVF"},{"id":"7bee91e4-15dd-4c2d-9ebc-2925be6c265c","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Notice in the above, I expect /ovf to exist. We're about to make it so! First we need to aquire ovftools. The VMware website has an<a href=\"http://www.vmware.com/support/developer/ovf/\">ovftool download</a>.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Notice in the above, I expect /ovf to exist. We're about to make it so! First we need to aquire ovftools. The VMware website has anovftool download."},{"id":"33fdf714-f6cf-4be1-868f-2c1eae2edfac","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Download the 64bit version and install it.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Download the 64bit version and install it."},{"id":"aefe32f3-b4b3-4430-898b-0ae54693dd19","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Now we need to make /ovf and the directories inside of it.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Now we need to make /ovf and the directories inside of it."},{"id":"3be0f40a-89ff-41fb-8c36-aae66f97f9ae","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Take the installed ovftools and stick them in the tools directory.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Take the installed ovftools and stick them in the tools directory."},{"id":"e2708d63-7871-4fdd-8f8f-f29e3ea2b3b7","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>We leave an empty files directory. This is where the post install part of the kickstart file will dump the OVA files.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"We leave an empty files directory. This is where the post install part of the kickstart file will dump the OVA files."},{"id":"2d0bac87-a0f2-4526-9a79-48c0ea848043","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Now we need to turn the ovf directory into ovf-00.t00.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Now we need to turn the ovf directory into ovf-00.t00."},{"id":"015a3cc8-1942-459d-858e-3551bf13d096","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>Creating Our Customizations: Finished</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Creating Our Customizations: Finished"},{"id":"4e6c07d8-6b00-4f14-be7f-51df407811fd","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Now that you have everything done, run umount /mnt/usb. Put that usb key into your server and boot to it. The installer will go through and do what we told it to.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Now that you have everything done, run umount /mnt/usb. Put that usb key into your server and boot to it. The installer will go through and do what we told it to."},{"id":"e388d223-ef52-4eeb-b87b-cf3da6aeec0a","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Once it powers off, you're ready to make an image from the installed ESXi.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Once it powers off, you're ready to make an image from the installed ESXi."},{"id":"6994a385-6105-46ea-9f46-db132720a676","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>Image Creation: USB Thumb Drive</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Image Creation: USB Thumb Drive"},{"id":"11503dc3-67be-4aae-990e-6c69f0d73d6c","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>For this part, we need yet another USB thumb drive. To keep this easy, just follow these basic steps.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"For this part, we need yet another USB thumb drive. To keep this easy, just follow these basic steps."},{"id":"56f62379-fcd2-4b0a-a35d-91addfdaf275","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"list","html":"<ol><li>Use a Windows box</li><li>Download<a href=\"http://www.linuxliveusb.com/en/download\">LiLi USB Creator</a></li><li>Download<a href=\"http://clonezilla.org/downloads.php\">Clonezilla</a>(I used the alternative stable)</li><li>Run LiLi</li><li>Tell it to install Clonezilla to a thumb drive</li></ol>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]}},{"id":"a46d50c0-46fb-4627-92a8-0484ed3d71a1","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>You'll probably want to make two copies of this. One for grabbing the image and one for pushing the image. For pushing the image, it needs to be at least as large as the image you're creating. For getting the image, 2GB is plenty.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"You'll probably want to make two copies of this. One for grabbing the image and one for pushing the image. For pushing the image, it needs to be at least as large as the image you're creating. For getting the image, 2GB is plenty."},{"id":"bf57ca35-6cec-4129-89dd-a6488c453b88","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Our ESXi image was large enough that we had to split up the thumb drive. A 64GB drive was given two partitions. The first was a 4GB FAT32 formatted partition that we placed Clonezilla on to. The second partition was Ext2 formatted and took up the remainder.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Our ESXi image was large enough that we had to split up the thumb drive. A 64GB drive was given two partitions. The first was a 4GB FAT32 formatted partition that we placed Clonezilla on to. The second partition was Ext2 formatted and took up the remainder."},{"id":"ba3a3bb8-e63f-409e-8c94-9dd73ae7372f","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>Image Creation: Getting the Image</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Image Creation: Getting the Image"},{"id":"8620416c-c60e-4d2b-b96c-0ea2ac45f1b9","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Boot to the plain Clonezilla USB drive on the ESXi server. You will probably want to also hook up a larger external hard drive for this.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Boot to the plain Clonezilla USB drive on the ESXi server. You will probably want to also hook up a larger external hard drive for this."},{"id":"6a9a3803-28c6-4282-82cc-b7079ad0d27c","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"list","html":"<ol><li>Boot to Clonezilla (I usually ping the \"Safe graphic\" option)</li><li>optional: Plug in external hard drive</li><li>I usually ping the \"Safe graphic\" option</li><li>For the keymap settings, default is usually fine</li><li>Start_Clonezilla</li><li>Choose device-image</li><li>Pick where you want the image to go (local_dev for external HD)</li><li>Run through the settings for that option</li><li>Choose the Expert setting</li><li>Choose savedisk</li><li>Give it a name</li><li>You probably only have one option (sda) for the local disk</li><li>-q2 is usually best (partclone can handle sparse vmfs)</li><li>Make sure to select the -nogui option!!! (I usually deselect -c)</li><li>Compression is your choice</li><li>Since this is going to ext, feel free to make a large partition size</li><li>I usually choose to skip any checks (not safe)</li></ol>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]}},{"id":"d12906ce-639d-4411-bcac-88ab3c74abfc","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>For me, the command in the end looks something like this...</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"For me, the command in the end looks something like this..."},{"id":"7f5fbcf4-9a19-4cb1-8607-70f1328d1768","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Now you get to wait for the image to get created. Once it's done, power off the box and we can start working on the deployment thumb drive.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Now you get to wait for the image to get created. Once it's done, power off the box and we can start working on the deployment thumb drive."},{"id":"11b286ab-14ea-439c-be8f-2a93e363edae","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>Image Creation: Clonezilla Modifications</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Image Creation: Clonezilla Modifications"},{"id":"42a1541e-c6b2-4e09-a235-14a180c42fa5","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>We're going back to that extra flash drive you made. In our case, it was 64GB. The first 4GB partition (FAT32) has the standard Clonezilla image, for now. The remainder of the flash drive should be a single ext2 partition. You'll want yours to basically be the same, but maybe only a 16GB flash drive will be needed. This second partition will hold only one thing (your image).</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"We're going back to that extra flash drive you made. In our case, it was 64GB. The first 4GB partition (FAT32) has the standard Clonezilla image, for now. The remainder of the flash drive should be a single ext2 partition. You'll want yours to basically be the same, but maybe only a 16GB flash drive will be needed. This second partition will hold only one thing (your image)."},{"id":"eaf3f97d-f6a2-44ea-8f03-5613b411b3af","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>We'll want to make some changes to the stuff LiLi put on the flash drive. For now, we'll assume the flash drive is sdb.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"We'll want to make some changes to the stuff LiLi put on the flash drive. For now, we'll assume the flash drive is sdb."},{"id":"9defe43f-3bbe-47e8-8805-6fdca9bc9d16","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Now copy the image you created with Clonezilla into /mnt/sdb2 and unmount it.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Now copy the image you created with Clonezilla into /mnt/sdb2 and unmount it."},{"id":"e8101f45-239f-4421-a391-6d5da6ec04a0","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>That's all there is to getting our image on to the flash drive. That's not enough, though. Sure, we could launch the vanilla clonezill on here and tell it to use the image from the larger partition. However, we're trying to make this fully automatic. We came this far and we're finishing the task!</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"That's all there is to getting our image on to the flash drive. That's not enough, though. Sure, we could launch the vanilla clonezill on here and tell it to use the image from the larger partition. However, we're trying to make this fully automatic. We came this far and we're finishing the task!"},{"id":"e1a12474-bf4e-491c-9a47-c4279fd9711a","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>It's worth noting that live Linux distros use squashfs. This is an amazing tool because it lets you make a large file system into something very tiny, but this comes with the side effect that you're not able to actually modify the files. Instead, we have to take that file system, unpack it, repack it, and replace it.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"It's worth noting that live Linux distros use squashfs. This is an amazing tool because it lets you make a large file system into something very tiny, but this comes with the side effect that you're not able to actually modify the files. Instead, we have to take that file system, unpack it, repack it, and replace it."},{"id":"e5b1b4c9-4b1d-4b0a-9ce8-0d77b40ec508","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>To do this...</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"To do this..."},{"id":"33f71f02-049c-41e2-9c39-eaa1edf105de","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Edit /mnt/sdb1/syslinux/syslinux.cfg:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Edit /mnt/sdb1/syslinux/syslinux.cfg:"},{"id":"10f07ee0-65fa-4264-8787-1349e3c260ec","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Feel free to copy/paste that exactly as is. This basically is what makes the interactive boot stuff in Clonezilla go away. It doesn't really do much more.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Feel free to copy/paste that exactly as is. This basically is what makes the interactive boot stuff in Clonezilla go away. It doesn't really do much more."},{"id":"458cb987-9cab-4fab-9967-5390132827d3","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Moving on, we need to modify what happens after booting. You might remember this as a sleek set of options for what we want to do. We know what we want to do, so we're going to embed it.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Moving on, we need to modify what happens after booting. You might remember this as a sleek set of options for what we want to do. We know what we want to do, so we're going to embed it."},{"id":"75931083-c2b3-4e9a-8c56-30ef7d165106","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>First up is grabbing the existing squashfs image.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"First up is grabbing the existing squashfs image."},{"id":"6b93d8b2-baa1-4046-8493-f6bf7019cb0d","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Now you have Clonezilla at your mercy. The first thing we want to do is burn the menu that launches when you start.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Now you have Clonezilla at your mercy. The first thing we want to do is burn the menu that launches when you start."},{"id":"326062ab-6c2d-4cc1-b33a-4a80796e729c","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>It's that simple. We delete that file. If you were to start up with only that change, you'd just end up at a shell. Now we need to tell it what to do when it boots up.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"It's that simple. We delete that file. If you were to start up with only that change, you'd just end up at a shell. Now we need to tell it what to do when it boots up."},{"id":"d90d0246-bd86-4248-bba0-035199de428e","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Edit etc/rc.local:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Edit etc/rc.local:"},{"id":"ae0315f6-14d7-4b6e-9355-6cdc051b1d66","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Edit usr/sbin/ocs-finished:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Edit usr/sbin/ocs-finished:"},{"id":"7ee7b66f-ecd8-47e1-a51b-bf290df9d0b1","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Make sure it's executable:</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Make sure it's executable:"},{"id":"db7f75f0-65a3-4682-a16b-5cf4d70491f6","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>This assumes that you named your image BArK-Image, as I did. Case matters!</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"This assumes that you named your image BArK-Image, as I did. Case matters!"},{"id":"9111bd63-dc09-4929-b79f-2786c13b9ac4","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Now we need to create the new squashfs and put it on the flash drive.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Now we need to create the new squashfs and put it on the flash drive."},{"id":"6a9e3aa6-d9ec-4fa7-8f6f-d2357c013656","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>That's all there is to it! Simple!</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"That's all there is to it! Simple!"},{"id":"d2b68407-c663-4f20-b9dd-daa8cff2b4df","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>Using It</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Using It"},{"id":"a609697b-c0a2-4c4b-91d1-eceff8890e35","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>Simply boot to it. Done. It'll deploy that image to the first disk.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Simply boot to it. Done. It'll deploy that image to the first disk."},{"id":"53ad1906-f23a-4252-92f4-f500d1669d53","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"h2","html":"<h2>Final Thoughts</h2>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"Final Thoughts"},{"id":"30cb2104-f89b-466b-bebe-ff918042668f","item":"2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","type":"text","html":"<p>This is a very complicated process. As I stated before, it's for edge cases ONLY. If you're dealing with normal business needs, there are far superior options out there. For the other 0.03% out there, I really hope this can take you easily from the start to the end of this insane task.</p>","src":null,"created_at":null,"updated_at":null,"metadata":{"isBasedOnUrl":null,"inLanguage":null,"starred":false,"inFeed":true,"hasPage":false,"inNav":false,"keywords":[]},"text":"This is a very complicated process. As I stated before, it's for edge cases ONLY. If you're dealing with normal business needs, there are far superior options out there. For the other 0.03% out there, I really hope this can take you easily from the start to the end of this insane task."}]},"site-footer-item":{"id":"site-footer-item","index":2,"metadata":{"@type":"footer","starred":true},"content":[{"id":"site-footer-block","type":"footer","html":"","metadata":{"starred":true},"footer":{"rss":{"href":"rss.xml","rel":"alternate","title":"beLazy RSS","type":"application/rss+xml"}}}]}},"sections":[{"componentId":"ArticleFallback","itemsToRenderIds":["2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe"],"contracts":{"the-beautician":{"$item_index":1,"sectionsBeautyverse":{"section-height":{"$class":["section-height-fullscreen"]},"text-align":{"$class":["text-align-left"]},"group-order":{"$class":["group-order-normal"]},"group-graphical-shape":{"$class":["group-graphical-shape-none"]}},"$class":["group-graphical-shape-none","group-order-normal","text-align-left","section-height-fullscreen","site:w-multiple-item","hero-transition-none","section-v-padding-medium","section-h-padding-large","Vignelli","2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","ArticleFallback"]},"the-colorist":{"$item_index":1,"colorverse":{"colors-solution":{"$class":["colors-white"]},"colors-locality":{"$class":["colors-local"]}},"$class":["colors-local","colors-white","site:colors-global","site:colors-light"],"colorsSolution":{"isLight":true,"isDark":false,"lightnessClass":"is-light","base":{"r":255,"g":255,"b":255},"bg":{"r":247,"g":247,"b":247},"box":{"r":255,"g":255,"b":255},"boxShadow":{"r":0,"g":0,"b":0,"a":0.1},"boxPop":{"r":1,"g":1,"b":1},"boxPopText":{"r":255,"g":255,"b":255},"boxPop2":{"r":31,"g":31,"b":31},"boxPop2Text":{"r":255,"g":255,"b":255},"boxPopTextHover":{"r":204,"g":204,"b":204},"boxPop2TextHover":{"r":204,"g":204,"b":204},"boxPopMostVibrant":{"r":226,"g":54,"b":54},"boxPopMostVibrantText":{"r":255,"g":255,"b":255},"selectionText":{"r":0,"g":0,"b":0},"selection":{"r":226,"g":54,"b":54,"a":0.5},"header":{"r":253,"g":253,"b":253},"zebraStripe":{"r":251,"g":251,"b":251},"line":{"r":236,"g":236,"b":236},"mediaBorder":{"css":"1px solid hsl(0, 0%, 93%)","width":1,"type":"solid","color":{"r":236,"g":236,"b":236}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.2},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.2)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.2},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":51,"g":51,"b":51},"title2":{"r":112,"g":112,"b":112},"subTitle":{"r":179,"g":179,"b":179},"text":{"r":0,"g":0,"b":0},"text2":{"r":128,"g":128,"b":128},"textShadow":{"r":255,"g":255,"b":255,"a":0.5},"textShadowProps":{"color":{"r":255,"g":255,"b":255,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":1,"g":1,"b":1},"textPop2":{"r":31,"g":31,"b":31},"meta":{"r":179,"g":179,"b":179},"metaHover":{"r":153,"g":153,"b":153},"icon":{"r":1,"g":1,"b":1},"iconSelected":{"r":1,"g":1,"b":1},"iconOver":{"r":1,"g":1,"b":1},"palette":[{"r":31,"g":31,"b":31},{"r":210,"g":210,"b":210},{"r":1,"g":1,"b":1},{"r":139,"g":139,"b":139},{"r":97,"g":97,"b":97}]}},"the-lensman":{"filter":{"$class":["insta_1977"],"graph":"insta_1977","config":null}},"itemsClasses":["2217d6c6-c9c0-4cd8-9eca-58c503fe7dfe","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay"],"siteClasses":["site:w-multiple-item","hero-transition-none","section-v-padding-medium","section-h-padding-large","Vignelli","site:colors-global","site:colors-light"],"componentClasses":["ArticleFallback"]},"sectionIndex":0}],"contracts":{"the-typographer":{"typography":{"fonts":{"display":{"normal":4,"bold":7,"$formality":-0.09090909090909094,"$type":["sans","grotesque"],"$caps":"normal","foundry":"google","family":"Roboto","name":"Roboto","license":"apache","tags":["sans serif"],"description":"Roboto is an open-source, grotesque sans-serif typeface designed by Christian Robertson in 2011 and released through Google. Despite being accused of being a frankenfont mashup of DIN and Helvetica, Im personally quite fond of Roboto. I think it renders crisply on screens and is very legible, even at smaller sizes. Roboto is the default font used in Google Maps and Google+."},"screen":{"normal":4,"bold":7,"$formality":-0.6363636363636364,"$type":["mono"],"$weight":2,"$width":2,"$contrast":2,"family":"Inconsolata","name":"Inconsolata","foundry":"google","license":"ofl","similar_to":["Akkurat Mono"],"description":"Inconsolata is an open-source monospaced typeface designed by Raph Levien. The design is humanist-inspired and takes cues from Avenir and Franklin Gothic according to the designer. It is a favorite programming font of many developers due to its crisp and clear on-screen rendering. Inconsolata includes a bold weight but without italics its not really appropriate for body copy."}},"styles":"html { font-family: '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } html.wf-active { font-family: 'Inconsolata', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-title, .wf-active .font-headline, .wf-active .font-h1, .wf-active .font-h2, .wf-active .font-h3 { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-subtitle, .wf-active .font-h4, .wf-active .font-h5, .wf-active .font-h6 { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 700; } .wf-active .font-text, .wf-active .font-list { font-family: 'Inconsolata', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; } .wf-active .font-quote { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400;font-style: italic; } .wf-active .font-cta { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; }","webfontconfig":{"google":{"families":["Roboto:400,700","Inconsolata:400,400italic,700,700italic"]}}},"htmlStyleTagContent":"html { font-family: '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } html.wf-active { font-family: 'Inconsolata', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-title, .wf-active .font-headline, .wf-active .font-h1, .wf-active .font-h2, .wf-active .font-h3 { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-subtitle, .wf-active .font-h4, .wf-active .font-h5, .wf-active .font-h6 { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 700; } .wf-active .font-text, .wf-active .font-list { font-family: 'Inconsolata', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; } .wf-active .font-quote { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400;font-style: italic; } .wf-active .font-cta { font-family: 'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; }","htmlScriptTagContent":"\n      if (window.WebFont) {\n        WebFont.load({\"google\":{\"families\":[\"Roboto:400,700\",\"Inconsolata:400,400italic,700,700italic\"]}});\n      }\n    "},"the-beautician":{"$item_index":0,"siteBeautyverse":{"design-style":{"$class":["Vignelli"]},"section-h-padding":{"$class":["section-h-padding-large"]},"section-v-padding":{"$class":["section-v-padding-medium"]},"hero-transition":{"$class":["hero-transition-none"]}},"$class":["hero-transition-none","section-v-padding-medium","section-h-padding-large","Vignelli","site:w-multiple-item"]},"the-colorist":{"$item_index":0,"colorverse":{"colors-solution":{"$class":["colors-light"]},"colors-locality":{"$class":["colors-global"]}},"$class":["colors-global","colors-light","site:w-multiple-item"],"colorsSolution":{"isLight":true,"isDark":false,"lightnessClass":"is-light","base":{"r":210,"g":210,"b":210},"bg":{"r":231,"g":231,"b":231},"box":{"r":242,"g":242,"b":242},"boxShadow":{"r":0,"g":0,"b":0,"a":0.1},"boxPop":{"r":1,"g":1,"b":1},"boxPopText":{"r":255,"g":255,"b":255},"boxPop2":{"r":31,"g":31,"b":31},"boxPop2Text":{"r":255,"g":255,"b":255},"boxPopTextHover":{"r":204,"g":204,"b":204},"boxPop2TextHover":{"r":204,"g":204,"b":204},"boxPopMostVibrant":{"r":226,"g":54,"b":54},"boxPopMostVibrantText":{"r":255,"g":255,"b":255},"selectionText":{"r":0,"g":0,"b":0},"selection":{"r":226,"g":54,"b":54,"a":0.5},"header":{"r":239,"g":239,"b":239},"zebraStripe":{"r":238,"g":238,"b":238},"line":{"r":224,"g":224,"b":224},"mediaBorder":{"css":"1px solid hsl(0, 0%, 88%)","width":1,"type":"solid","color":{"r":224,"g":224,"b":224}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.2},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.2)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.2},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":51,"g":51,"b":51},"title2":{"r":108,"g":108,"b":108},"subTitle":{"r":169,"g":169,"b":169},"text":{"r":0,"g":0,"b":0},"text2":{"r":121,"g":121,"b":121},"textShadow":{"r":255,"g":255,"b":255,"a":0.5},"textShadowProps":{"color":{"r":255,"g":255,"b":255,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":1,"g":1,"b":1},"textPop2":{"r":31,"g":31,"b":31},"meta":{"r":169,"g":169,"b":169},"metaHover":{"r":143,"g":143,"b":143},"icon":{"r":1,"g":1,"b":1},"iconSelected":{"r":1,"g":1,"b":1},"iconOver":{"r":1,"g":1,"b":1},"palette":[{"r":31,"g":31,"b":31},{"r":210,"g":210,"b":210},{"r":1,"g":1,"b":1},{"r":139,"g":139,"b":139},{"r":97,"g":97,"b":97}]}}},"siteData":{"id":"2d921901-b298-43c1-b291-43a6e167e330","ordered":true,"site":"the-domains/belazy","title":"","navigable":false,"type":"permalink","siteUrl":"https://thegrid.ai/belazy/","siteId":"600965fd-c06f-4551-8a0c-cfba4d6f52ed","user":"688bc9b0-7c18-4cb3-8236-52e5a32d15a9","config":{"name":"beLazy","style":"the-composer","favicon":null,"cta":{"domain":null,"bucket":null,"version":null},"analytics":{"google":null,"facebook":null,"twitter":null},"opengraph":{"image":null,"type":null,"appId":null},"collections":[{"index":{"path":"/","number":15,"navigable":true,"paginate":true},"feed":{"path":"/rss.xml","format":"rss","number":10},"permalink":{"path":"/:title/"}}],"color":{"brandColors":["#1f1f1f","#d2d2d2","#010101","#8b8b8b","#616161"],"brandStrength":0,"lightness":0.7326015974394977,"saturation":0,"rhythmicContrast":0.2724353172816336},"layout_spectrum":0,"typography_spectrum":0.22376},"navigation":[{"href":"index.html","title":"beLazy","rel":"home","type":"MainPage"}],"links":[{"href":"rss.xml","rel":"alternate","title":"beLazy RSS","type":"application/rss+xml"}]},"navigation":{"componentId":"NavListRow","itemsToRenderIds":["site-navigation-item"],"contracts":{"the-beautician":{"$item_index":0,"sectionsBeautyverse":{"section-height":{"$class":["section-height-fullscreen"]},"text-align":{"$class":["text-align-left"]},"group-order":{"$class":["group-order-normal"]},"group-graphical-shape":{"$class":["group-graphical-shape-none"]}},"$class":["group-graphical-shape-none","group-order-normal","text-align-left","section-height-fullscreen","site:w-multiple-item","hero-transition-none","section-v-padding-medium","section-h-padding-large","Vignelli","site-navigation-item","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:is-navigation","NavListRow"]},"the-colorist":{"$item_index":0,"colorverse":{"colors-solution":{"$class":["colors-light"]},"colors-locality":{"$class":["colors-local"]}},"$class":["colors-local","colors-light","site:colors-global","site:colors-light"],"colorsSolution":{"isLight":true,"isDark":false,"lightnessClass":"is-light","base":{"r":210,"g":210,"b":210},"bg":{"r":231,"g":231,"b":231},"box":{"r":242,"g":242,"b":242},"boxShadow":{"r":0,"g":0,"b":0,"a":0.1},"boxPop":{"r":1,"g":1,"b":1},"boxPopText":{"r":255,"g":255,"b":255},"boxPop2":{"r":31,"g":31,"b":31},"boxPop2Text":{"r":255,"g":255,"b":255},"boxPopTextHover":{"r":204,"g":204,"b":204},"boxPop2TextHover":{"r":204,"g":204,"b":204},"boxPopMostVibrant":{"r":226,"g":54,"b":54},"boxPopMostVibrantText":{"r":255,"g":255,"b":255},"selectionText":{"r":0,"g":0,"b":0},"selection":{"r":226,"g":54,"b":54,"a":0.5},"header":{"r":239,"g":239,"b":239},"zebraStripe":{"r":238,"g":238,"b":238},"line":{"r":224,"g":224,"b":224},"mediaBorder":{"css":"1px solid hsl(0, 0%, 88%)","width":1,"type":"solid","color":{"r":224,"g":224,"b":224}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.2},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.2)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.2},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":51,"g":51,"b":51},"title2":{"r":108,"g":108,"b":108},"subTitle":{"r":169,"g":169,"b":169},"text":{"r":0,"g":0,"b":0},"text2":{"r":121,"g":121,"b":121},"textShadow":{"r":255,"g":255,"b":255,"a":0.5},"textShadowProps":{"color":{"r":255,"g":255,"b":255,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":1,"g":1,"b":1},"textPop2":{"r":31,"g":31,"b":31},"meta":{"r":169,"g":169,"b":169},"metaHover":{"r":143,"g":143,"b":143},"icon":{"r":1,"g":1,"b":1},"iconSelected":{"r":1,"g":1,"b":1},"iconOver":{"r":1,"g":1,"b":1},"palette":[{"r":31,"g":31,"b":31},{"r":210,"g":210,"b":210},{"r":1,"g":1,"b":1},{"r":139,"g":139,"b":139},{"r":97,"g":97,"b":97}]}},"the-lensman":{"filter":{"$class":["insta_brannan"],"graph":"insta_brannan","config":null}},"itemsClasses":["site-navigation-item","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:is-navigation"],"siteClasses":["site:w-multiple-item","hero-transition-none","section-v-padding-medium","section-h-padding-large","Vignelli","site:colors-global","site:colors-light"],"componentClasses":["NavListRow"]}},"footer":{"componentId":"Footer3col","itemsToRenderIds":["site-footer-item"],"contracts":{"the-beautician":{"$item_index":2,"sectionsBeautyverse":{"section-height":{"$class":["section-height-fullscreen"]},"text-align":{"$class":["text-align-left"]},"group-order":{"$class":["group-order-normal"]},"group-graphical-shape":{"$class":["group-graphical-shape-square"]}},"$class":["group-graphical-shape-square","group-order-normal","text-align-left","section-height-fullscreen","site:w-multiple-item","hero-transition-none","section-v-padding-medium","section-h-padding-large","Vignelli","site-footer-item","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:is-footer","Footer3col"]},"the-colorist":{"$item_index":2,"colorverse":{"colors-solution":{"$class":["colors-light"]},"colors-locality":{"$class":["colors-local"]}},"$class":["colors-local","colors-light","site:colors-global","site:colors-light"],"colorsSolution":{"isLight":true,"isDark":false,"lightnessClass":"is-light","base":{"r":210,"g":210,"b":210},"bg":{"r":231,"g":231,"b":231},"box":{"r":242,"g":242,"b":242},"boxShadow":{"r":0,"g":0,"b":0,"a":0.1},"boxPop":{"r":1,"g":1,"b":1},"boxPopText":{"r":255,"g":255,"b":255},"boxPop2":{"r":31,"g":31,"b":31},"boxPop2Text":{"r":255,"g":255,"b":255},"boxPopTextHover":{"r":204,"g":204,"b":204},"boxPop2TextHover":{"r":204,"g":204,"b":204},"boxPopMostVibrant":{"r":226,"g":54,"b":54},"boxPopMostVibrantText":{"r":255,"g":255,"b":255},"selectionText":{"r":0,"g":0,"b":0},"selection":{"r":226,"g":54,"b":54,"a":0.5},"header":{"r":239,"g":239,"b":239},"zebraStripe":{"r":238,"g":238,"b":238},"line":{"r":224,"g":224,"b":224},"mediaBorder":{"css":"1px solid hsl(0, 0%, 88%)","width":1,"type":"solid","color":{"r":224,"g":224,"b":224}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.2},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.2)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.2},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":51,"g":51,"b":51},"title2":{"r":108,"g":108,"b":108},"subTitle":{"r":169,"g":169,"b":169},"text":{"r":0,"g":0,"b":0},"text2":{"r":121,"g":121,"b":121},"textShadow":{"r":255,"g":255,"b":255,"a":0.5},"textShadowProps":{"color":{"r":255,"g":255,"b":255,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":1,"g":1,"b":1},"textPop2":{"r":31,"g":31,"b":31},"meta":{"r":169,"g":169,"b":169},"metaHover":{"r":143,"g":143,"b":143},"icon":{"r":1,"g":1,"b":1},"iconSelected":{"r":1,"g":1,"b":1},"iconOver":{"r":1,"g":1,"b":1},"palette":[{"r":31,"g":31,"b":31},{"r":210,"g":210,"b":210},{"r":1,"g":1,"b":1},{"r":139,"g":139,"b":139},{"r":97,"g":97,"b":97}]}},"the-lensman":{"filter":{"$class":["insta_hefe"],"graph":"insta_hefe","config":null}},"itemsClasses":["site-footer-item","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:is-footer"],"siteClasses":["site:w-multiple-item","hero-transition-none","section-v-padding-medium","section-h-padding-large","Vignelli","site:colors-global","site:colors-light"],"componentClasses":["Footer3col"]}}}</script><script type="text/javascript">
        window.theGridSiteType = 'permalink';
        var mountApp = dsNickJones.default.mountApp;
        mountApp(document.getElementById('app'), window.pageReactInitState);
        console.log('mounted app.');
        </script><script id="web-font-loader">
      if (window.WebFont) {
        WebFont.load({"google":{"families":["Roboto:400,700","Inconsolata:400,400italic,700,700italic"]}});
      }
    </script></body></html>